<?xml version="1.0" encoding="utf-8"?>
<post><title>Android SharedPreference security - Stack Overflow</title><question><text><div class="post-text" itemprop="text">
<p>I wonder about shared preferences security.</p>
<p>Is it possible to get access to sharedpreferences, even if they were created in MODE_PRIV (0) ?<br/>
Is it possible to list all sharedpreferences available and then fetch all settings from other apps?<br/>
Is sharedpreferences good place to put sensitive data, such as password or auth token?</p>
<p>Thanks</p>
</div></text><author><a href="/users/492624/marek-sebera">Marek Sebera</a></author><comments><comment><text><span class="comment-copy">possible duplicate of <a href="http://stackoverflow.com/questions/3608883/how-secure-are-sqlite-and-sharedpreferences-files-on-android">How secure are SQLite and SharedPreferences files on Android?</a></span></text><author><a class="comment-user" href="/users/100957/heiko-rupp" title="19,954 reputation">Heiko Rupp</a></author></comment></comments></question><answers><answer><text><div class="post-text" itemprop="text">
<p>Shared Preferences are stored as a file in the filesystem on the device. They are, by default, stored within the app's data directory with filesystem premissions set that only allow the UID that the specific application runs with to access them. So, they are private in so much as Linux file permissions restrict access to them, the same as on any Linux/Unix system.</p>
<p>Anyone with root level access to the device will be able to see them, as root has access to everything on the filesystem. Also, any application that runs with the same UID as the creating app would be able to access them (this is not usually done and you need to take specific action to make two apps runs with the same UID, so this is probably not a big concern). Finally, if someone was able to mount your device's filesystem without using the installed Android OS, they could also bypass the permissions that restrict access.</p>
<p>If you're concerned about such access to your preferences (or any data written by your application), then you will want to encrypt it. If you are that concerned about them, you're going to need to figure out exactly how much protection is necessary for the level of risk you see. There is a very extensive discussion about this in <a href="http://shop.oreilly.com/product/0636920022596.do" rel="noreferrer">Application Security for the Android Platform</a>, just published in December 2011 (disclaimer: I'm the author of this book).</p>
</div></text><author><a href="/users/121356/jeffsix">jeffsix</a></author><comments><comment><text><span class="comment-copy">+1 That's a great answer: concise and informative. Thanks!</span></text><author><a class="comment-user" href="/users/440921/mark-whitaker" title="4,467 reputation">Mark Whitaker</a></author></comment><comment><text><span class="comment-copy">Is there any official documentation that talks about this? Do you have any references?</span></text><author><a class="comment-user" href="/users/589667/clu" title="2,829 reputation">clu</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>SharedPreferences are nothing but XML files in your phones /data/data/ folder,So any application or user with superuser privilages on a rooted device can access your SharedPreferences, even if they were created with MODE_PRIV</p>
<p>Still <strong>there is a way to protect it</strong> from everybody...
Please checkout this link.
Here you can store data in pref with encryption,the class is self explanatory and very easy to use.</p>
<p><a href="https://github.com/sveinungkb/encrypted-userprefs">https://github.com/sveinungkb/encrypted-userprefs</a></p>
<p>As said by others anyone can access it but in this case no one can read data inside it as it is encrypted. So its secure.For <strong>Utmost</strong> security my suggestion will be to generate the key used for encryption at run time rather than hard coding it. There are many ways to do that :)</p>
</div></text><author><a href="/users/2778537/jazz-haque">Jazz Haque</a></author><comments><comment><text><span class="comment-copy">then how do you save the generated key?</span></text><author><a class="comment-user" href="/users/2726028/olayinka" title="1,839 reputation">Olayinka</a></author></comment><comment><text><span class="comment-copy">@Olayinka It'd be safer to encrypt that with yet another key and save it in a <code>SharedPref</code>. But then, what to do with the other key? Seriously though, best scenario would be sending the encrypted key and a device UID to a server using SSL to be stored there and retrieved as needed. That would require connectivity, but would allow you to blacklist a device and suddenly have all data trashed. Without constant internet connection, any try to encrypt data is not 100% safe.</span></text><author><a class="comment-user" href="/users/4261176/paulo-avelar" title="1,590 reputation">Paulo Avelar</a></author></comment><comment><text><span class="comment-copy">I used the above solution...it works 9 out of 10 times..but I am getting error:1e06b065:Cipher functions:EVP_DecryptFinal_ex:BAD_DECRYPT" at times..Does anyone have an idea?</span></text><author><a class="comment-user" href="/users/1199868/raj-trivedi" title="467 reputation">Raj Trivedi</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>Normally, no, they cannot be accessed by other apps, however, you should note that SharedPreferences are stored as XML files in the <code>/data/data/</code> directory, which essentially means that <em>any</em> application with <em>superuser privileges</em> on a <em>rooted</em> device <em>can</em> access your <code>SharedPreference</code>s, even if they were created with <code>MODE_PRIV</code></p>
</div></text><author><a href="/users/152873/aviraldg">aviraldg</a></author><comments/></answer></answers></post>