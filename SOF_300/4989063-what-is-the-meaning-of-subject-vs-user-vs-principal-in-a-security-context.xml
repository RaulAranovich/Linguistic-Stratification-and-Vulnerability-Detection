<?xml version="1.0" encoding="utf-8"?>
<post><title>java - What is the meaning of Subject vs. User vs. Principal in a Security Context? - Stack Overflow</title><question><text><div class="post-text" itemprop="text">
<p>In the context of security frameworks, a few terms commonly occur <strong>subject</strong>, <strong>user</strong> and <strong>principal</strong>, of which I have not been able to find a clear definition and the difference between them. </p>
<p>So, what exactly do these terms mean, and why are these distinctions of <strong>subject</strong> and <strong>principal</strong> needed?</p>
</div></text><author><a href="/users/3924118/nbro">nbro</a></author><comments/></question><answers><answer><text><div class="post-text" itemprop="text">
<p>These are hierarchical in the way that genus, species and individual are hierarchical.</p>
<ul>
<li><strong>Subject</strong> - In a security context, a <em>subject</em> is any entity that requests access to an <em>object</em>.  These are generic terms used to denote the thing requesting access and the thing the request is made against.  When you log onto an application you are the subject and the application is the object.  When someone knocks on your door the visitor is the subject requesting access and your home is the object access is requested of.</li>
<li><strong>Principal</strong> - A subset of <em>subject</em> that is represented by an account, role or other unique identifier.  When we get to the level of implementation details, principals are the unique keys we use in access control lists.  They may represent human users, automation, applications, connections, etc.</li>
<li><strong>User</strong> - A subset of <em>principal</em> usually referring to a human operator.  The distinction is blurring over time because the words "user" or "user ID" are commonly interchanged with "account".  However, when you need to make the distinction between the broad class of things that are <em>principals</em> and the subset of these that are interactive operators driving transactions in a non-deterministic fashion, "user" is the right word.</li>
</ul>
<p>Subject/Object inherits from the same terms as used in grammar.  In a sentence the subject is the actor and the object is the thing acted on.  In this sense the use has been around since before computers were invented.  In a security context, a subject is anything that can make a request.  As noted above, this need not be limited to IT security and so is a very broad classification.  The interesting thing is that subject implies object.  Without an object, there is no subject.</p>
<p>Principals are what subjects resolve to.  When you present your credit card you are the subject and the account number is the principal.  In other contexts your user ID or state-issued identification is your principal.  But principals can be associated with many types of subject that are not people.  When applications make requests for system-level functions the principal may the signer of a signed executable code module but even in that case the user driving the request is still the subject.</p>
<p>User is more specific than subject or principal in that it usually refers to an interactive operator.  That is why we have a graphical User Interface and not a Graphical Principal Interface.  A user is an instance of <em>subject</em> that resolves to a <em>principal</em>.  A single user may resolve to any number of principals but any principal is expected to resolve to a single user (assuming people observe the requirement not to share IDs).  In the example above, the signer of an executable code module is definitely <em>not</em> the user, but it <em>is</em> a valid principal.  The interactive operator trying to get the module loaded is the user.</p>
<p>As noted in the comments, even the authoritative sources do not agree on these terms.  I searched NIST, SANS, IEEE, MITRE and several "quasi-authoritative" sources such as security exam guides while preparing this response. No single source that I found which was at least quasi-authoritative covered all three terms and all differed significantly in their usage.  This is my take on how the terms <em>should</em> be used but from a practical standpoint, when you are poring over a manual in the middle of the night, the definitions tend to be whatever the vendor or writer say they are.  Hopefully though responses here will provide enough insight to navigate the waters and parse any security document using these terms.</p>
</div></text><author><a href="/users/214668/t-rob">T.Rob</a></author><comments><comment><text><span class="comment-copy">What is the benefit of breaking things down to Subject, Principal, User, its extra complexity what benefit do we get from this extra complexity?</span></text><author><a class="comment-user owner" href="/users/438319/ams" title="19,594 reputation">ams</a></author></comment><comment><text><span class="comment-copy">The ability to choose the right level of specificity. It is the same benefit we gain from being able to make a distinction between a destination versus a queue or topic. The ability to choose between different levels of specificity in a taxonomy allows for a precision of expression that better communicates a writer's intent to a reader. When programming we have the luxury/curse that the CPU will interpret our instructions in only one way and we are forced to use it's level of precision. But in human language we need nuance and precision to convey meaning efficiently.</span></text><author><a class="comment-user" href="/users/214668/t-rob" title="25,003 reputation">T.Rob</a></author></comment><comment><text><span class="comment-copy">Thanks for the expanded post T.Rob</span></text><author><a class="comment-user owner" href="/users/438319/ams" title="19,594 reputation">ams</a></author></comment><comment><text><span class="comment-copy">Excellent answer.</span></text><author><a class="comment-user" href="/users/377270/sarnold" title="80,202 reputation">sarnold</a></author></comment><comment><text><span class="comment-copy">T.Rob, you rock. Great response.</span></text><author><a class="comment-user" href="/users/408093/linuxlars" title="2,446 reputation">LinuxLars</a></author></comment><comment><text><span class="comment-copy">Thanks Arnold, Lars!  Glad to see this is still helping people.  It was fun to research and write.</span></text><author><a class="comment-user" href="/users/214668/t-rob" title="25,003 reputation">T.Rob</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>Have a look at my <a href="http://telicthoughts.blogspot.com/2011/02/authentication-concept-map.html" rel="noreferrer">Authentication concept map</a>:</p>
<p><img alt="enter image description here" src="https://i.stack.imgur.com/5bT0L.jpg"/></p>
</div></text><author><a href="/users/525298/marinus">Marinus</a></author><comments/></answer><answer><text><div class="post-text" itemprop="text">
<p>I think the terminology is taken from <a href="http://download.oracle.com/javase/1.4.2/docs/guide/security/jaas/tutorials/GeneralAcnAndAzn.html" rel="noreferrer">JAAS</a>.</p>
<blockquote>
<p>When an application uses JAAS
  authentication to authenticate the
  user (or other entity such as a
  service), a <strong>Subject</strong> is created as a
  result. The purpose of the Subject is
  to represent the authenticated user. <strong>A
  Subject is comprised of a set of
  Principals</strong>, where each Principal
  represents an identity for that user.
  For example, a Subject could have a
  name Principal ("Susan Smith") and a
  Social Security Number Principal
  ("987-65-4321"), thereby
  distinguishing this Subject from other
  Subjects.</p>
</blockquote>
</div></text><author><a href="/users/127320/aravind-r-yarram">Aravind R. Yarram</a></author><comments><comment><text><span class="comment-copy">I have seen this definition before, its too dense, can you elaborate on it, especially how a user is different than a principal, why the term subject is used and not just user. If these terms have meaning beyond JAAS I very much want to become familiar with that meaning, if these terms are inventions of JAAS then I guess the Sun Engineers that created it picked poor names for whatever these concepts means. I have asked quite a few programmers this questions and have not been able to get clear answers, every one seems to have a different understanding of these terms.</span></text><author><a class="comment-user owner" href="/users/438319/ams" title="19,594 reputation">ams</a></author></comment><comment><text><span class="comment-copy">Seems like a Principal is just one way to identify a Subject. Put another way, any Principal could theoretically serve as a primary key on your user database.</span></text><author><a class="comment-user" href="/users/129655/platinum-azure" title="30,057 reputation">Platinum Azure</a></author></comment><comment><text><span class="comment-copy">The lexicon predates JAAS by a long shot.  JAAS just reuses some of it and at times in non-standard ways. Part of the problem that prompted this question is that the concepts are learned from the contexts in which the terminology is used and then reused in slightly different ways. When authoritative sources are hard to find or simply ignored, the meanings drift over time. When it comes to security where precision is an absolute requirement this drift toward ambiguity degrades our ability to build and implement secure designs.</span></text><author><a class="comment-user" href="/users/214668/t-rob" title="25,003 reputation">T.Rob</a></author></comment><comment><text><span class="comment-copy">@T.Rob do you any paper titles, or authoritative references that you can share.</span></text><author><a class="comment-user owner" href="/users/438319/ams" title="19,594 reputation">ams</a></author></comment><comment><text><span class="comment-copy">Unfortunately, even the authoritative sources disagree.  SANS doesn't define principal or subject at all <a href="http://bit.ly/hl4rUP" rel="nofollow noreferrer">bit.ly/hl4rUP</a> and NIST <a href="http://bit.ly/fE7NJs" rel="nofollow noreferrer">bit.ly/fE7NJs</a> defines subject specifically as a person. Other "authoritative" sources are similarly vague which, considering the importance of clarity in this field, is rather disappointing.  The IEE has a glossary but you can only read it with membership or subscription so it has limited use in a discussion with a wide audience. I was basing my response in part on Shon Harris' CISSP Exam Guide.</span></text><author><a class="comment-user" href="/users/214668/t-rob" title="25,003 reputation">T.Rob</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p><strong>Subject</strong> is the entity that requests a service. It can be a user or a process. Probably that is why the name Subject was chosen instead of user. </p>
<p>When a subject tries to access a service, the subject has to be authenticated first. Successful authentication ends with loading the <strong>Security Principals</strong> for that Subject. For example, in a Role Based Access Control system, an authenticated (logged-in) user will usually have two principals - userId and roleId. In such systems, the privileges(i.e who can access what) are specified for both roles and for users. During authorization(i.e checking whether the requested service should be permitted), the security system will check for accessibility against both the principals. </p>
<p>Therefore, from the perspective of authorization, principals are the actual entities for which access is allowed or disallowed. Subject is just a user/thread/process that holds some principals. </p>
</div></text><author><a href="/users/616107/rahulmohan">rahulmohan</a></author><comments><comment><text><span class="comment-copy">What is benefit of having multiple principles per subject?</span></text><author><a class="comment-user owner" href="/users/438319/ams" title="19,594 reputation">ams</a></author></comment><comment><text><span class="comment-copy">I can think of two benefits: (1) Consider user Alice with principals UserId("Alice"), Role("Manager"), Department("Sales") accessing a service (the Object). The service access control can then be specified as "Allow for Role(Manager)" or "Disallow for Department(Sales)" etc. instead of specifying whether Alice can access it or not. Such kind of access control systems are easier to manage since the security administrator need not specify access privileges for ALL users for ALL services.</span></text><author><a class="comment-user" href="/users/616107/rahulmohan" title="770 reputation">rahulmohan</a></author></comment><comment><text><span class="comment-copy">(2) In an enterprise system, users usually have to be authenticated with multiple systems before some composite service can be executed. It could happen that each of those systems have its own access control mechanisms requiring different details - one system uses SSN, and another uses userId. Thus the same subject should possess both the principals for it to access both</span></text><author><a class="comment-user" href="/users/616107/rahulmohan" title="770 reputation">rahulmohan</a></author></comment><comment><text><span class="comment-copy">I get the feeling that 99% of confusion with this terminology could be resolved with one sentence along the lines of, "a principal is basically a group".</span></text><author><a class="comment-user" href="/users/138513/trejkaz" title="4,687 reputation">Trejkaz</a></author></comment><comment><text><span class="comment-copy">?! ... why you say a Principal is a Group?</span></text><author><a class="comment-user" href="/users/1261162/rafael" title="1,019 reputation">Rafael</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>As T.Rob explained, Subject is any entity that requests access to an object. Starting from that point I've found a comment on javax.security.auth.Subject code that i've found VERY useful and easy to understand:</p>
<p>"Subjects may potentially have multiple identities. Each identity is represented as a Principal within the Subject. Principals simply bind names to a Subject. For example, a Subject that happens to be a person, Alice, might have two Principals: one which binds "Alice Bar", the name on her driver license, to the Subject, and another which binds, "999-99-9999", the number on her student identification card, to the Subject. Both Principals refer to the same Subject even though each has a different name."</p>
<p>Hope it helps.</p>
</div></text><author><a href="/users/1261162/rafael">Rafael</a></author><comments/></answer></answers></post>