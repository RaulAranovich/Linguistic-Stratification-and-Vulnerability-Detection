<?xml version="1.0" encoding="utf-8"?>
<post><title>python - Django SECRET_KEY - Stack Overflow</title><question><text><div class="post-text" itemprop="text">
<p>What exactly is the point of the <code>SECRET_KEY</code> in django? I did a few google searches and checked out the docs ( <a href="https://docs.djangoproject.com/en/dev/ref/settings/#secret-key" rel="noreferrer">https://docs.djangoproject.com/en/dev/ref/settings/#secret-key</a> ), but I was looking for a more in-depth explanation of this, and why it is required. </p>
<p>For example, what could happen if the key was compromised / others knew what it was? Thank you.</p>
</div></text><author><a href="/users/451969/jared-farrish">Jared Farrish</a></author><comments><comment><text><span class="comment-copy">If you have a secret key, and it's compromised and released to others, you have a problem. It doesn't matter if you're using Django or not.</span></text><author><a class="comment-user" href="/users/451969/jared-farrish" title="36,334 reputation">Jared Farrish</a></author></comment><comment><text><span class="comment-copy">But what problem, exactly?</span></text><author><a class="comment-user" href="/users/76452/tobych" title="2,055 reputation">tobych</a></author></comment><comment><text><span class="comment-copy">I did a thorough answer <a href="http://stackoverflow.com/questions/15170637/effects-of-changing-djangos-secret-key/15383766?noredirect=1#comment21743494_15383766">here</a> (shameless plug)</span></text><author><a class="comment-user" href="/users/301373/sberder" title="2,398 reputation">sberder</a></author></comment><comment><text><span class="comment-copy">@sberder Maybe you should write an answer to this question as well. I imagine you could do it much better than the accepted non-answer.</span></text><author><a class="comment-user" href="/users/3476849/kasperd" title="1,160 reputation">kasperd</a></author></comment></comments></question><answers><answer><text><div class="post-text" itemprop="text">
<p>It is used for making hashes.  Look:</p>
<pre class="lang-py prettyprint prettyprinted" style=""><code><span class="pun">&gt;</span><span class="pln">grep </span><span class="pun">-</span><span class="typ">Inr</span><span class="pln"> SECRET_KEY </span><span class="pun">*</span><span class="pln">
conf</span><span class="pun">/</span><span class="pln">global_settings</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">255</span><span class="pun">:</span><span class="pln">SECRET_KEY </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pln">
conf</span><span class="pun">/</span><span class="pln">project_template</span><span class="pun">/</span><span class="pln">settings</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">61</span><span class="pun">:</span><span class="pln">SECRET_KEY </span><span class="pun">=</span><span class="pln"> </span><span class="str">''</span><span class="pln">
contrib</span><span class="pun">/</span><span class="pln">auth</span><span class="pun">/</span><span class="pln">tokens</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">54</span><span class="pun">:</span><span class="pln">        hash </span><span class="pun">=</span><span class="pln"> sha_constructor</span><span class="pun">(</span><span class="pln">settings</span><span class="pun">.</span><span class="pln">SECRET_KEY </span><span class="pun">+</span><span class="pln"> unicode</span><span class="pun">(</span><span class="pln">user</span><span class="pun">.</span><span class="pln">id</span><span class="pun">)</span><span class="pln"> </span><span class="pun">+</span><span class="pln">
contrib</span><span class="pun">/</span><span class="pln">comments</span><span class="pun">/</span><span class="pln">forms</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">86</span><span class="pun">:</span><span class="pln">        info </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">content_type</span><span class="pun">,</span><span class="pln"> object_pk</span><span class="pun">,</span><span class="pln"> timestamp</span><span class="pun">,</span><span class="pln"> settings</span><span class="pun">.</span><span class="pln">SECRET_KEY</span><span class="pun">)</span><span class="pln">
contrib</span><span class="pun">/</span><span class="pln">formtools</span><span class="pun">/</span><span class="pln">utils</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">15</span><span class="pun">:</span><span class="pln">    order</span><span class="pun">,</span><span class="pln"> pickles the result </span><span class="kwd">with</span><span class="pln"> the SECRET_KEY setting</span><span class="pun">,</span><span class="pln"> then takes an md5
contrib</span><span class="pun">/</span><span class="pln">formtools</span><span class="pun">/</span><span class="pln">utils</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">32</span><span class="pun">:</span><span class="pln">    data</span><span class="pun">.</span><span class="pln">append</span><span class="pun">(</span><span class="pln">settings</span><span class="pun">.</span><span class="pln">SECRET_KEY</span><span class="pun">)</span><span class="pln">
contrib</span><span class="pun">/</span><span class="pln">messages</span><span class="pun">/</span><span class="pln">storage</span><span class="pun">/</span><span class="pln">cookie</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">112</span><span class="pun">:</span><span class="pln">        SECRET_KEY</span><span class="pun">,</span><span class="pln"> modified to make it unique </span><span class="kwd">for</span><span class="pln"> the present purpose</span><span class="pun">.</span><span class="pln">
contrib</span><span class="pun">/</span><span class="pln">messages</span><span class="pun">/</span><span class="pln">storage</span><span class="pun">/</span><span class="pln">cookie</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">114</span><span class="pun">:</span><span class="pln">        key </span><span class="pun">=</span><span class="pln"> </span><span class="str">'django.contrib.messages'</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> settings</span><span class="pun">.</span><span class="pln">SECRET_KEY
contrib</span><span class="pun">/</span><span class="pln">sessions</span><span class="pun">/</span><span class="pln">backends</span><span class="pun">/</span><span class="pln">base</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">89</span><span class="pun">:</span><span class="pln">        pickled_md5 </span><span class="pun">=</span><span class="pln"> md5_constructor</span><span class="pun">(</span><span class="pln">pickled </span><span class="pun">+</span><span class="pln"> settings</span><span class="pun">.</span><span class="pln">SECRET_KEY</span><span class="pun">).</span><span class="pln">hexdigest</span><span class="pun">()</span><span class="pln">
contrib</span><span class="pun">/</span><span class="pln">sessions</span><span class="pun">/</span><span class="pln">backends</span><span class="pun">/</span><span class="pln">base</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">95</span><span class="pun">:</span><span class="pln">        </span><span class="kwd">if</span><span class="pln"> md5_constructor</span><span class="pun">(</span><span class="pln">pickled </span><span class="pun">+</span><span class="pln"> settings</span><span class="pun">.</span><span class="pln">SECRET_KEY</span><span class="pun">).</span><span class="pln">hexdigest</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> tamper_check</span><span class="pun">:</span><span class="pln">
contrib</span><span class="pun">/</span><span class="pln">sessions</span><span class="pun">/</span><span class="pln">backends</span><span class="pun">/</span><span class="pln">base</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">134</span><span class="pun">:</span><span class="pln">        </span><span class="com"># Use settings.SECRET_KEY as added salt.</span><span class="pln">
contrib</span><span class="pun">/</span><span class="pln">sessions</span><span class="pun">/</span><span class="pln">backends</span><span class="pun">/</span><span class="pln">base</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">143</span><span class="pun">:</span><span class="pln">                       settings</span><span class="pun">.</span><span class="pln">SECRET_KEY</span><span class="pun">)).</span><span class="pln">hexdigest</span><span class="pun">()</span><span class="pln">
contrib</span><span class="pun">/</span><span class="pln">sessions</span><span class="pun">/</span><span class="pln">models</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">16</span><span class="pun">:</span><span class="pln">        pickled_md5 </span><span class="pun">=</span><span class="pln"> md5_constructor</span><span class="pun">(</span><span class="pln">pickled </span><span class="pun">+</span><span class="pln"> settings</span><span class="pun">.</span><span class="pln">SECRET_KEY</span><span class="pun">).</span><span class="pln">hexdigest</span><span class="pun">()</span><span class="pln">
contrib</span><span class="pun">/</span><span class="pln">sessions</span><span class="pun">/</span><span class="pln">models</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">59</span><span class="pun">:</span><span class="pln">        </span><span class="kwd">if</span><span class="pln"> md5_constructor</span><span class="pun">(</span><span class="pln">pickled </span><span class="pun">+</span><span class="pln"> settings</span><span class="pun">.</span><span class="pln">SECRET_KEY</span><span class="pun">).</span><span class="pln">hexdigest</span><span class="pun">()</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> tamper_check</span><span class="pun">:</span><span class="pln">
core</span><span class="pun">/</span><span class="pln">management</span><span class="pun">/</span><span class="pln">commands</span><span class="pun">/</span><span class="pln">startproject</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">32</span><span class="pun">:</span><span class="pln">        </span><span class="com"># Create a random SECRET_KEY hash, and put it in the main settings.</span><span class="pln">
core</span><span class="pun">/</span><span class="pln">management</span><span class="pun">/</span><span class="pln">commands</span><span class="pun">/</span><span class="pln">startproject</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">37</span><span class="pun">:</span><span class="pln">        settings_contents </span><span class="pun">=</span><span class="pln"> re</span><span class="pun">.</span><span class="pln">sub</span><span class="pun">(</span><span class="pln">r</span><span class="str">"(?&lt;=SECRET_KEY = ')'"</span><span class="pun">,</span><span class="pln"> secret_key </span><span class="pun">+</span><span class="pln"> </span><span class="str">"'"</span><span class="pun">,</span><span class="pln"> settings_contents</span><span class="pun">)</span><span class="pln">
middleware</span><span class="pun">/</span><span class="pln">csrf</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">38</span><span class="pun">:</span><span class="pln">                </span><span class="pun">%</span><span class="pln"> </span><span class="pun">(</span><span class="pln">randrange</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> _MAX_CSRF_KEY</span><span class="pun">),</span><span class="pln"> settings</span><span class="pun">.</span><span class="pln">SECRET_KEY</span><span class="pun">)).</span><span class="pln">hexdigest</span><span class="pun">()</span><span class="pln">
middleware</span><span class="pun">/</span><span class="pln">csrf</span><span class="pun">.</span><span class="pln">py</span><span class="pun">:</span><span class="lit">41</span><span class="pun">:</span><span class="pln">    </span><span class="kwd">return</span><span class="pln"> md5_constructor</span><span class="pun">(</span><span class="pln">settings</span><span class="pun">.</span><span class="pln">SECRET_KEY </span><span class="pun">+</span><span class="pln"> session_id</span><span class="pun">).</span><span class="pln">hexdigest</span><span class="pun">()</span></code></pre>
</div></text><author><a href="/users/141818/roshan-mathews">Roshan Mathews</a></author><comments><comment><text><span class="comment-copy">Why didn't they call it a salt then? ;)</span></text><author><a class="comment-user" href="/users/524368/datenwolf" title="119,630 reputation">datenwolf</a></author></comment><comment><text><span class="comment-copy">This is a guess, but I suppose it is easier to tell people "don't share your <code>SECRET_KEY</code>", as opposed to "your <code>SALT</code> is a secret key that you should keep to yourself."</span></text><author><a class="comment-user" href="/users/141818/roshan-mathews" title="3,794 reputation">Roshan Mathews</a></author></comment><comment><text><span class="comment-copy">That distinction is very important. In cryptography, salts are not secret, but <code>SECRET_KEY</code> must be kept secure. The use of the <code>SECRET_KEY</code> is much more akin to the use of a key in a signed hash such as HMAC (which, if performance wasn't a consideration, would probably be used instead).</span></text><author><a class="comment-user" href="/users/62660/travis-jensen" title="3,013 reputation">Travis Jensen</a></author></comment><comment><text><span class="comment-copy">This does not look like an answer to me. All you did was a single grep command without explaining what any of it does. Where is the answer to "what could happen if the key was compromised?"?</span></text><author><a class="comment-user" href="/users/3476849/kasperd" title="1,160 reputation">kasperd</a></author></comment></comments></answer></answers></post>