<?xml version="1.0" encoding="utf-8"?>
<post><title>html - Why are iframes considered dangerous and a security risk? - Stack Overflow</title><question><text><div class="post-text" itemprop="text">
<p>Why are iframes considered dangerous and a security risk? Can someone describe an example of a case where it can be used maliciously?</p>
</div></text><author><a href="/users/135318/daniel-t">Daniel T.</a></author><comments><comment><text><span class="comment-copy">That sounds like an old wives tale. Your browser window is basically just one big iframe.</span></text><author><a class="comment-user" href="/users/191226/bill-criswell" title="11,700 reputation">Bill Criswell</a></author></comment><comment><text><span class="comment-copy">It was already <a href="http://stackoverflow.com/questions/362730/are-iframes-considered-bad-practice">asked</a> on stackoverflow</span></text><author><a class="comment-user" href="/users/920258/samich" title="22,160 reputation">Samich</a></author></comment><comment><text><span class="comment-copy">@Samich — No, that is about best practise, not specifically security issues (and the only security issue I can think of arises from <i>third parties</i> using iframes)</span></text><author><a class="comment-user" href="/users/19068/quentin" title="529,021 reputation">Quentin</a></author></comment><comment><text><span class="comment-copy">Not so much security as its not considered best practice, see: <a href="http://stackoverflow.com/questions/1081315/why-developers-hate-iframes" title="why developers hate iframes">stackoverflow.com/questions/1081315/why-developers-hate-ifra‌​mes</a>  They were a lot more popular when people designed with tables also, divs all but eliminate the need for iframes.</span></text><author><a class="comment-user" href="/users/1981471/randomus1r" title="2,078 reputation">RandomUs1r</a></author></comment></comments></question><answers><answer><text><div class="post-text" itemprop="text">
<p>As soon as you're displaying content from another domain, you're basically trusting that domain not to serve-up malware.</p>
<p>There's nothing wrong with iframes per se. If you control the content of the iframe, they're perfectly safe.</p>
</div></text><author><a href="/users/12579/diodeus">Diodeus</a></author><comments><comment><text><span class="comment-copy">As soon as you link to content from another domain etc etc … There's nothing iframe specific about this.</span></text><author><a class="comment-user" href="/users/19068/quentin" title="529,021 reputation">Quentin</a></author></comment><comment><text><span class="comment-copy">A correctly implemented browsers (a.k.a. User Agent) will not allow the iframe contents to leak outside the iframe. If the host document (one containing the <code>&lt;iframe&gt;</code> element) has suitable styling and hints the iframe contains untrusted content, there's no problem. Modulo real vulnerabitilities in the browser, of course. In short, an <code>&lt;iframe&gt;</code> is about as safe as a <code>&lt;a href&gt;</code>.</span></text><author><a class="comment-user" href="/users/334451/mikko-rantalainen" title="4,667 reputation">Mikko Rantalainen</a></author></comment><comment><text><span class="comment-copy">What about a hidden iframe that belongs to the same domain? Is this totally safe?</span></text><author><a class="comment-user" href="/users/606602/ciaran-gallagher" title="1,559 reputation">Ciaran Gallagher</a></author></comment><comment><text><span class="comment-copy">Hidden <code>&lt;iframe&gt;</code> from the same domain may cause security risk if the content inside the hidden iframe can be modified by attacker. That will allow the attacker to extend the XSS attack inside the hidden <code>&lt;iframe&gt;</code> to any page on your site that refers to said <code>&lt;iframe&gt;</code>d content. See <a href="http://stackoverflow.com/a/9428051/334451">stackoverflow.com/a/9428051/334451</a> for details.</span></text><author><a class="comment-user" href="/users/334451/mikko-rantalainen" title="4,667 reputation">Mikko Rantalainen</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>The <code>IFRAME</code> element may be a security risk if <strong>your site is embedded inside an <code>IFRAME</code> on hostile site</strong>. Google "clickjacking" for more details. Note that it does not matter if <em>you</em> use <code>&lt;iframe&gt;</code> or not. The only real protection from this attack is to add HTTP header <a href="https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options" rel="noreferrer"><code>X-Frame-Options: DENY</code></a> and hope that the browser knows its job.</p>
<p>In addition, <strong>IFRAME element may be a security risk if any page on your site contains an XSS vulnerability which can be exploited</strong>. In that case the attacker can expand the XSS attack to any page within the same domain that can be persuaded to load within an <code>&lt;iframe&gt;</code> on the page with XSS vulnerability. This is because content from the same origin (same domain) is allowed to access the parent content DOM (practically execute JavaScript in the "host" document). The only real protection methods from this attack is to add HTTP header <code>X-Frame-Options: DENY</code> and/or always correctly encode all user submitted data (that is, never have an XSS vulnerability on your site - easier said than done).</p>
<p>That's the technical side of the issue. <strong>In addition, there's the issue of user interface.</strong> If you teach your users to trust that URL bar is supposed to not change when they click links (e.g. your site uses a big iframe with all the actual content), then the users will not notice anything in the future either in case of actual security vulnerability. For example, you could have an XSS vulnerability within your site that allows the attacker to load content from hostile source within your iframe. Nobody could tell the difference because the URL bar still looks identical to previous behavior (never changes) and the content "looks" valid even though it's from hostile domain requesting user credentials.</p>
<p>If somebody claims that using an <code>&lt;iframe&gt;</code> element on your site is dangerous and causes a security risk, he does not understand what <code>&lt;iframe&gt;</code> element does, or he is speaking about possibility of <code>&lt;iframe&gt;</code> related vulnerabilities in browsers. Security of <code>&lt;iframe src="..."&gt;</code> tag is equal to <code>&lt;img src="..."</code> or <code>&lt;a href="..."&gt;</code> as long there are no vulnerabilities in the browser. And if there's a suitable vulnerability, it might be possible to trigger it even without using <code>&lt;iframe&gt;</code>, <code>&lt;img&gt;</code> or <code>&lt;a&gt;</code> element, so it's not worth considering for this issue.</p>
<p>However, <strong>be warned that content from <code>&lt;iframe&gt;</code> can initiate top level navigation by default</strong>. That is, content within the <code>&lt;iframe&gt;</code> is allowed to automatically open a link over current page location (the new location will be visible in the address bar). The only way to avoid that is to add <a href="http://caniuse.com/#feat=iframe-sandbox" rel="noreferrer"><code>sandbox</code></a> attribute without value <code>allow-top-navigation</code>. For example, <code>&lt;iframe sandbox="allow-forms allow-scripts" ...&gt;</code>. Unfortunately, sandbox also disables all plugins, always. For example, Youtube content cannot be sandboxed because Flash player is still required to view all Youtube content. No browser supports using plugins and disallowing top level navigation at the same time.</p>
</div></text><author><a href="/users/334451/mikko-rantalainen">Mikko Rantalainen</a></author><comments/></answer><answer><text><div class="post-text" itemprop="text">
<p>I'm assuming cross-domain iFrame since presumably the risk would be lower if you controlled it yourself.</p>
<ul>
<li><strong>Clickjacking</strong> is a problem if your site is included as an iframe</li>
<li>A compromised iFrame could display malicious content (imagine the iFrame displaying a login box instead of an ad)</li>
<li>An included iframe can make certain JS calls like alert and prompt which could annoy your user</li>
<li>An included iframe can redirect via location.href (yikes, imagine a 3p frame redirecting the customer from bankofamerica.com to bankofamerica.fake.com)</li>
<li>Malware inside the 3p frame (java/flash/activeX) could infect your user</li>
</ul>
</div></text><author><a href="/users/8724/joe-zack">Joe Zack</a></author><comments/></answer><answer><text><div class="post-text" itemprop="text">
<p>"Dangerous" and "Security risk" are not the first things that spring to mind when people mention iframes … but they can be used in <a href="https://www.owasp.org/index.php/Clickjacking" rel="nofollow">clickjacking</a> attacks.</p>
</div></text><author><a href="/users/19068/quentin">Quentin</a></author><comments/></answer></answers></post>