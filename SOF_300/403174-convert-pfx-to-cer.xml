<?xml version="1.0" encoding="utf-8"?>
<post><title>security - Convert .pfx to .cer - Stack Overflow</title><question><text><div class="post-text" itemprop="text">
<p>Is it possible to convert a .pfx (Personal Information Exchange) file to a .cer (Security Certificate) file? Unless I'm mistaken, isn't a .cer somehow embedded inside a .pfx? I'd like some way to extract it, if possible.</p>
</div></text><author><a href="/users/47645/pwninstein">Pwninstein</a></author><comments/></question><answers><answer><text><div class="post-text" itemprop="text">
<p>the simple way I believe is to import it then export it, using the certificate manager in Windows Management Console.  </p>
</div></text><author><a href="/users/27907/andrew-cox">Andrew Cox</a></author><comments><comment><text><span class="comment-copy">i tried doing this but when i select export private key , i am getting .cer (DER encoded) option disabled . and midletsigner utility need provatekey anyhow..</span></text><author><a class="comment-user" href="/users/260990/jigar-joshi" title="170,709 reputation">Jigar Joshi</a></author></comment><comment><text><span class="comment-copy">You have to check the box when you import it, that says "mark this key as exportable"</span></text><author><a class="comment-user" href="/users/27907/andrew-cox" title="7,271 reputation">Andrew Cox</a></author></comment><comment><text><span class="comment-copy">How to get to the Certificate Manager in Windows: <a href="http://msdn.microsoft.com/en-us/library/ms788967.aspx" rel="nofollow noreferrer">msdn.microsoft.com/en-us/library/ms788967.aspx</a></span></text><author><a class="comment-user" href="/users/36695/james-white" title="945 reputation">James White</a></author></comment><comment><text><span class="comment-copy">The easier way to open the Windows certificate manager is to type "certmgr.msc" at the command prompt.</span></text><author><a class="comment-user" href="/users/63849/jan-derk" title="810 reputation">Jan Derk</a></author></comment><comment><text><span class="comment-copy">@AndrewCox, However is there any difference behind-the-scenes between marking it as exportable and not marking it as such. Or is it simply a UI option?</span></text><author><a class="comment-user" href="/users/632951/pacerier" title="33,795 reputation">Pacerier</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>PFX files are <a href="http://en.wikipedia.org/wiki/PKCS12" rel="noreferrer">PKCS#12 Personal Information Exchange Syntax Standard</a> bundles. They can include arbitrary number of private keys with accompanying X.509 certificates and a certificate authority chain (set certificates).</p>
<p>If you want to extract client certificates, you can use <a href="http://www.openssl.org/docs/apps/pkcs12.html" rel="noreferrer">OpenSSL's PKCS12 tool</a>.</p>
<pre><code>openssl pkcs12 -in input.pfx -out mycerts.crt -nokeys -clcerts
</code></pre>
<p>The command above will output certificate(s) in PEM format. The ".crt" file extension is handled by both macOS and Window.</p>
<p>You mention ".cer" extension in the question which is conventionally used for the DER encoded files. A binart encoding. Try the ".crt" file first and if it's not accepted, easy to convert from PEM to DER:</p>
<pre><code>openssl x509 -inform pem -in mycerts.crt -outform der -out mycerts.cer
</code></pre>
</div></text><author><a href="/users/49709/berk-d-demir">Berk D. Demir</a></author><comments><comment><text><span class="comment-copy">+1 for explaining what the file is in addition to providing the commands.</span></text><author><a class="comment-user" href="/users/19308/joshua-drake" title="2,043 reputation">Joshua Drake</a></author></comment><comment><text><span class="comment-copy">"Mac verify error: invalid password?" when I tried it.  I don't know any passwords, I just have the file my vendor supplied.</span></text><author><a class="comment-user" href="/users/15689/brian-knoblauch" title="12,280 reputation">Brian Knoblauch</a></author></comment><comment><text><span class="comment-copy">IT seems like dropping "-nokeys" works when you are attemtping to convert a certificate with its private keys, say for use with Fiddler</span></text><author><a class="comment-user" href="/users/1837991/gert-van-den-berg" title="234 reputation">Gert van den Berg</a></author></comment><comment><text><span class="comment-copy">@Berk, Aside from OpenSSL, does Windows cmd have any way to do it?</span></text><author><a class="comment-user" href="/users/632951/pacerier" title="33,795 reputation">Pacerier</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>I wanted to add a method which I think was simplest of all. </p>
<ol>
<li><p>Simply right click the pfx file, click "Install" follow the wizard, and add it to a store (I added to the Personal store). </p></li>
<li><p>In start menu type certmgr.msc and go to CertManager program. </p></li>
<li><p>Find your pfx certificate (tabs at top are the various stores), click the export button and follow the wizard (there is an option to export as .CER) </p></li>
</ol>
<p>Essentially it does the same thing as Andrew's answer, but it avoids using Windows Management Console (goes straight to the import/export).</p>
</div></text><author><a href="/users/3023642/kingpuppy">kingPuppy</a></author><comments><comment><text><span class="comment-copy">Not much faster since you'd still have to open certmgr.msc to export it....</span></text><author><a class="comment-user" href="/users/632951/pacerier" title="33,795 reputation">Pacerier</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>If you're working in PowerShell you can use something like the following, given a pfx file <strong>InputBundle.pfx</strong>, to produce a DER encoded (binary) certificate file <strong>OutputCert.der</strong>:</p>
<pre><code>Get-PfxCertificate -FilePath InputBundle.pfx | 
Export-Certificate -FilePath OutputCert.der -Type CERT
</code></pre>
<p><em>Newline added for clarity, but you can of course have this all on a single line.</em></p>
<p>If you need the certificate in ASCII/Base64 encoded PEM format, you can take extra steps to do so as documented elsewhere, such as here: <a href="https://superuser.com/questions/351548/windows-integrated-utility-to-convert-der-to-pem">https://superuser.com/questions/351548/windows-integrated-utility-to-convert-der-to-pem</a></p>
<p>If you need to export to a different format than DER encoded, you can change the <code>-Type</code> parameter for Export-Certificate to use the types supported by .NET, as seen in <code>help Export-Certificate -Detailed</code>:</p>
<pre><code>-Type &lt;CertType&gt;
    Specifies the type of output file for the certificate export as follows. 
     -- SST: A Microsoft serialized certificate store (.sst) file format which can contain one or more certificates. This is the default value for multiple certificates. 
     -- CERT: A .cer file format which contains a single DER-encoded certificate. This is the default value for one certificate. 
     -- P7B: A PKCS#7 file format which can contain one or more certificates.
</code></pre>
</div></text><author><a href="/users/992456/ian-gallagher">Ian Gallagher</a></author><comments><comment><text><span class="comment-copy">Export-Certificate is only available for some versions like Win 8.1 and Server 2012 R2 though. If you're in some other version like Win 7, then no luck!</span></text><author><a class="comment-user" href="/users/230391/deep-b" title="885 reputation">Deep-B</a></author></comment><comment><text><span class="comment-copy">It should be present in Server 2012 and Windows 8.0 (<a href="https://technet.microsoft.com/en-us/library/hh848628%28v=wps.620%29.aspx" rel="nofollow noreferrer">technet.microsoft.com/en-us/library/hh848628(v=wps.620).asp‌​x</a>), but good point about Windows 7 and such!</span></text><author><a class="comment-user" href="/users/992456/ian-gallagher" title="166 reputation">Ian Gallagher</a></author></comment><comment><text><span class="comment-copy">@IanGallagher, How does this compare with OpenSSL's option?</span></text><author><a class="comment-user" href="/users/632951/pacerier" title="33,795 reputation">Pacerier</a></author></comment><comment><text><span class="comment-copy">Best method - works on windows 10</span></text><author><a class="comment-user" href="/users/462754/tobbenb3" title="212 reputation">tobbenb3</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<pre><code>openssl rsa -in f.pem -inform PEM -out f.der -outform DER
</code></pre>
</div></text><author><a>NONE</a></author><comments/></answer></answers></post>