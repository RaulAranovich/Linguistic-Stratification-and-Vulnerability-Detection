<?xml version="1.0" encoding="utf-8"?>
<post><title>security - How do I turn off Oracle password expiration? - Stack Overflow</title><question><text><div class="post-text" itemprop="text">
<p>I'm using Oracle for development.  The password for a bootstrap account that I always use to rebuild my database has expired.</p>
<p>How do I turn off password expiration for this user (and all other users) permanently?</p>
<p>I'm using Oracle 11g, which has passwords expire by default.</p>
</div></text><author><a href="/users/549/josh-kodroff">Josh Kodroff</a></author><comments><comment><text><span class="comment-copy">I think you might be better off asking this on serverfault.com.  I'm not going to force it because you did say you're using it for development, and I think there's still a chance someone here will know and/or others here might benefit from this information.</span></text><author><a class="comment-user" href="/users/1288/bill-the-lizard" title="240,849 reputation">Bill the Lizard</a></author></comment><comment><text><span class="comment-copy">I think I'll do just that.  I was debating which site it was more appropriate for, since it's a basic database question and not so much a DBA thing.</span></text><author><a class="comment-user owner" href="/users/549/josh-kodroff" title="10,977 reputation">Josh Kodroff</a></author></comment><comment><text><span class="comment-copy">Not sure what the dupe policy is for cross-site questions, but here's the link: <a href="http://serverfault.com/questions/37622/how-do-i-turn-off-oracle-password-expiration" title="how do i turn off oracle password expiration">serverfault.com/questions/37622/…</a></span></text><author><a class="comment-user owner" href="/users/549/josh-kodroff" title="10,977 reputation">Josh Kodroff</a></author></comment></comments></question><answers><answer><text><div class="post-text" itemprop="text">
<p>To alter the password expiry policy for a certain user profile in Oracle first check wich profile the user is in using:</p>
<pre class="lang-sql prettyprint prettyprinted" style=""><code><span class="kwd">select</span><span class="pln"> profile </span><span class="kwd">from</span><span class="pln"> DBA_USERS </span><span class="kwd">where</span><span class="pln"> username </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&lt;username&gt;'</span><span class="pun">;</span></code></pre>
<p>Then you can change the limit to never expire using:</p>
<pre class="lang-sql prettyprint prettyprinted" style=""><code><span class="kwd">alter</span><span class="pln"> profile </span><span class="pun">&lt;</span><span class="pln">profile_name</span><span class="pun">&gt;</span><span class="pln"> limit password_life_time UNLIMITED</span><span class="pun">;</span></code></pre>
<p>If you want to previously check the limit you may use:</p>
<pre class="lang-sql prettyprint prettyprinted" style=""><code><span class="kwd">select</span><span class="pln"> resource_name</span><span class="pun">,</span><span class="pln">limit </span><span class="kwd">from</span><span class="pln"> dba_profiles </span><span class="kwd">where</span><span class="pln"> profile</span><span class="pun">=</span><span class="str">'&lt;profile_name&gt;'</span><span class="pun">;</span></code></pre>
</div></text><author><a href="/users/794665/pedro-carri%c3%a7o">Pedro Carriço</a></author><comments><comment><text><span class="comment-copy">This altered the profile.  However, I have users whose passwords are set to expire because the default profile had it as such when they were created.  How do I alter these user accounts so the password doesn't expire?</span></text><author><a class="comment-user" href="/users/706983/jay-imerman" title="3,572 reputation">Jay Imerman</a></author></comment><comment><text><span class="comment-copy"><code>select username,expiry_date,account_status from dba_users;</code>  to view the account_status.  for those expiring account, you may need to reset the password once for the last time.</span></text><author><a class="comment-user" href="/users/420711/will-wu" title="148 reputation">Will Wu</a></author></comment><comment><text><span class="comment-copy">alter user aaa account unlock;</span></text><author><a class="comment-user" href="/users/255139/kalpesh-soni" title="2,222 reputation">Kalpesh Soni</a></author></comment><comment><text><span class="comment-copy">For completeness, if you need to change a user to another profile: <code>ALTER USER Bob PROFILE MyNonExpiringProfile;</code>.</span></text><author><span class="comment-user">user565869</span></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>For <em>development</em> you can disable password policy if no other profile was set (i.e. disable password expiration in default one):</p>
<pre class="lang-sql prettyprint prettyprinted" style=""><code><span class="kwd">ALTER</span><span class="pln"> PROFILE </span><span class="str">"DEFAULT"</span><span class="pln"> LIMIT PASSWORD_VERIFY_FUNCTION </span><span class="kwd">NULL</span><span class="pun">;</span></code></pre>
<p>Then, reset password and unlock user account. It should never expire again:</p>
<pre class="lang-sql prettyprint prettyprinted" style=""><code><span class="kwd">alter</span><span class="pln"> </span><span class="kwd">user</span><span class="pln"> user_name identified </span><span class="kwd">by</span><span class="pln"> new_password account unlock</span><span class="pun">;</span></code></pre>
</div></text><author><a href="/users/747054/shimon-pozin">Shimon Pozin</a></author><comments><comment><text><span class="comment-copy">Thanks, that works just nice!</span></text><author><a class="comment-user" href="/users/2590960/grep" title="1,175 reputation">grep</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>As the other answers state, changing the user's profile (e.g. the 'DEFAULT' profile) appropriately will lead to passwords, that once set, will never expire.</p>
<p>However, as one commenter points out, passwords set under the profile's old values may already be expired, and (if after the profile's specified grace period) the account locked. </p>
<p>The solution for expired passwords with locked accounts (as provided in an answering comment) is to use one version of the ALTER USER command:</p>
<pre class="lang-sql prettyprint prettyprinted" style=""><code><span class="kwd">ALTER</span><span class="pln"> </span><span class="kwd">USER</span><span class="pln"> xyz_user ACCOUNT UNLOCK</span><span class="pun">;</span></code></pre>
<p>However the unlock command only works for accounts where the account is actually locked, but not for those accounts that are in the grace period, where the password is expired but the account is not yet locked. For these accounts the password must be reset with another version of the ALTER USER command:</p>
<pre class="lang-sql prettyprint prettyprinted" style=""><code><span class="kwd">ALTER</span><span class="pln"> </span><span class="kwd">USER</span><span class="pln"> xyz_user IDENTIFIED </span><span class="kwd">BY</span><span class="pln"> new_password</span><span class="pun">;</span></code></pre>
<p>Below is a little SQL*Plus script that a privileged user (e.g. user 'SYS') can use to reset a user's password to the current existing hashed value stored in the database.</p>
<pre class="lang-sql prettyprint prettyprinted" style=""><code><span class="pln">REM Tell SQL</span><span class="pun">*</span><span class="pln">Plus </span><span class="kwd">to</span><span class="pln"> show before </span><span class="kwd">and</span><span class="pln"> after versions </span><span class="kwd">of</span><span class="pln"> variable substitutions
</span><span class="kwd">SET</span><span class="pln"> VERIFY </span><span class="kwd">ON</span><span class="pln">
SHOW VERIFY

REM Tell SQL</span><span class="pun">*</span><span class="pln">Plus </span><span class="kwd">to</span><span class="pln"> </span><span class="kwd">use</span><span class="pln"> the ampersand </span><span class="str">'&amp;'</span><span class="pln"> </span><span class="kwd">to</span><span class="pln"> indicate variable substitution expansion
</span><span class="kwd">SET</span><span class="pln"> DEFINE </span><span class="str">'&amp;'</span><span class="pln">
SHOW DEFINE

REM Specify </span><span class="kwd">in</span><span class="pln"> a SQL</span><span class="pun">*</span><span class="pln">Plus variable the account </span><span class="kwd">to</span><span class="pln"> </span><span class="str">'reset'</span><span class="pln">
DEFINE USER_NAME </span><span class="pun">=</span><span class="pln"> </span><span class="str">'xyz_user'</span><span class="pln">

REM Show the status </span><span class="kwd">of</span><span class="pln"> the account before reset
</span><span class="kwd">SELECT</span><span class="pln">
  ACCOUNT_STATUS</span><span class="pun">,</span><span class="pln">
  TO_CHAR</span><span class="pun">(</span><span class="pln">LOCK_DATE</span><span class="pun">,</span><span class="pln"> </span><span class="str">'YYYY-MM-DD HH24:MI:SS'</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">AS</span><span class="pln"> LOCK_DATE
</span><span class="kwd">FROM</span><span class="pln">
  DBA_USERS
</span><span class="kwd">WHERE</span><span class="pln">
  USERNAME </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&amp;USER_NAME'</span><span class="pun">;</span><span class="pln">

REM </span><span class="kwd">Create</span><span class="pln"> a SQL</span><span class="pun">*</span><span class="pln">Plus variable </span><span class="kwd">to</span><span class="pln"> hold the hash </span><span class="kwd">of</span><span class="pln"> existing password
DEFINE OLD_PASSWORD </span><span class="pun">=</span><span class="pln"> </span><span class="str">""</span><span class="pln">

REM Tell SQL</span><span class="pun">*</span><span class="pln">Plus </span><span class="kwd">where</span><span class="pln"> </span><span class="kwd">to</span><span class="pln"> store the value </span><span class="kwd">to</span><span class="pln"> be selected </span><span class="kwd">with</span><span class="pln"> SQL 
</span><span class="kwd">COLUMN</span><span class="pln"> PWORDHASH NEW_VALUE OLD_PASSWORD

REM </span><span class="kwd">Select</span><span class="pln"> the old hash password </span><span class="kwd">as</span><span class="pln"> a delimited string 
</span><span class="kwd">SELECT</span><span class="pln"> 
  </span><span class="str">''''</span><span class="pln"> </span><span class="pun">||</span><span class="pln"> PASSWORD </span><span class="pun">||</span><span class="pln"> </span><span class="str">''''</span><span class="pln"> </span><span class="kwd">AS</span><span class="pln"> PWORDHASH
</span><span class="kwd">FROM</span><span class="pln"> 
  SYS</span><span class="pun">.</span><span class="kwd">USER</span><span class="pun">$</span><span class="pln"> 
</span><span class="kwd">WHERE</span><span class="pln"> 
  NAME </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&amp;USER_NAME'</span><span class="pun">;</span><span class="pln">

REM Show the contents </span><span class="kwd">of</span><span class="pln"> the SQL</span><span class="pun">*</span><span class="pln">Plus variable
DEFINE OLD_PASSWORD

REM Reset the password 
</span><span class="kwd">ALTER</span><span class="pln"> </span><span class="kwd">USER</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">USER_NAME IDENTIFIED </span><span class="kwd">BY</span><span class="pln"> </span><span class="kwd">VALUES</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">OLD_PASSWORD</span><span class="pun">;</span><span class="pln">

REM Show the status </span><span class="kwd">of</span><span class="pln"> the account after reset
</span><span class="kwd">SELECT</span><span class="pln">
  ACCOUNT_STATUS</span><span class="pun">,</span><span class="pln">
  TO_CHAR</span><span class="pun">(</span><span class="pln">LOCK_DATE</span><span class="pun">,</span><span class="pln"> </span><span class="str">'YYYY-MM-DD HH24:MI:SS'</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">AS</span><span class="pln"> LOCK_DATE
</span><span class="kwd">FROM</span><span class="pln">
  DBA_USERS
</span><span class="kwd">WHERE</span><span class="pln">
  USERNAME </span><span class="pun">=</span><span class="pln"> </span><span class="str">'&amp;USER_NAME'</span><span class="pun">;</span></code></pre>
</div></text><author><a href="/users/1689714/kieron-hardy">Kieron Hardy</a></author><comments><comment><text><span class="comment-copy">Very nice, thanks</span></text><author><a class="comment-user" href="/users/541334/dreyln" title="520 reputation">dreyln</a></author></comment><comment><text><span class="comment-copy">Thanks for the help.  It's so hard to find a relevant answer. Every other answer refers to PASSWORD_LIFE_TIME only.</span></text><author><a class="comment-user" href="/users/1092055/sabertiger" title="310 reputation">sabertiger</a></author></comment><comment><text><span class="comment-copy">The SYS.USER$.PASSWORD column will only contain the hash of the NON-case-sensitive (uppercase?) version of the password. In Oracle 11, unless you set the system parameter SEC_CASE_SENSITIVE_LOGON=FALSE there will be be a much longer hash of the case sensitive password in the SYS.USER$.SPARE4 column.</span></text><author><a class="comment-user" href="/users/848661/morbo" title="461 reputation">Morbo</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>I believe that the password expiration behavior, by default, is to never expire.  However, you could set up a profile for your dev user set and set the <code>PASSWORD_LIFE_TIME</code>. See the <a href="http://www.orafaq.com/wiki/Oracle_database_Security_FAQ#How_does_one_enforce_strict_password_controls.3F" rel="noreferrer">orafaq</a> for more details.  You can see <a href="http://www.odi.ch/weblog/posting.php?posting=520" rel="noreferrer">here</a> for an example of one person's perspective and usage.</p>
</div></text><author><a href="/users/103043/akf">akf</a></author><comments><comment><text><span class="comment-copy">I think in a fresh 11g install (as opposed to an upgrade) with the recommended improved security, the passwords will default to expire after 30 days.</span></text><author><a class="comment-user" href="/users/25714/gary-myers" title="29,731 reputation">Gary Myers</a></author></comment><comment><text><span class="comment-copy">On 11g it's 180 days: <a href="http://docs.oracle.com/cd/E38689_01/pt853pbr0/eng/pt/tadm/task_WorkingWithOracle11gSecurityFeatures-3e78fd.html" rel="nofollow noreferrer">docs.oracle.com/cd/E38689_01/pt853pbr0/eng/pt/tadm/…</a></span></text><author><a class="comment-user" href="/users/326206/nicolas-mommaerts" title="1,496 reputation">Nicolas Mommaerts</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>I will suggest its not a good idea to turn off the password expiration as it can lead to possible threats to  confidentiality, integrity and availability of data.</p>
<p>However if you want so.</p>
<p>If you have proper access use following SQL </p>
<blockquote>
<p>SELECT username, account_status FROM dba_users;</p>
</blockquote>
<p>This should give you result like this.</p>
<pre class="lang-sql prettyprint prettyprinted" style=""><code><span class="pln">   USERNAME                       ACCOUNT_STATUS
</span><span class="com">------------------------------ -----------------</span><span class="pln">

SYSTEM                         </span><span class="kwd">OPEN</span><span class="pln">
SYS                            </span><span class="kwd">OPEN</span><span class="pln">
SDMADM                         </span><span class="kwd">OPEN</span><span class="pln">
MARKETPLACE                    </span><span class="kwd">OPEN</span><span class="pln">
SCHEMAOWNER                    </span><span class="kwd">OPEN</span><span class="pln">
ANONYMOUS                      </span><span class="kwd">OPEN</span><span class="pln">
SCHEMAOWNER2                   </span><span class="kwd">OPEN</span><span class="pln">
SDMADM2                        </span><span class="kwd">OPEN</span><span class="pln">
SCHEMAOWNER1                   </span><span class="kwd">OPEN</span><span class="pln">
SDMADM1                        </span><span class="kwd">OPEN</span><span class="pln">
HR                             EXPIRED</span><span class="pun">(</span><span class="pln">GRACE</span><span class="pun">)</span><span class="pln">

USERNAME                       ACCOUNT_STATUS
</span><span class="com">------------------------------ -----------------</span><span class="pln">

APEX_PUBLIC_USER               LOCKED
APEX_040000                    LOCKED
FLOWS_FILES                    LOCKED
XS</span><span class="pun">$</span><span class="kwd">NULL</span><span class="pln">                        EXPIRED </span><span class="pun">&amp;</span><span class="pln"> LOCKED
OUTLN                          EXPIRED </span><span class="pun">&amp;</span><span class="pln"> LOCKED
XDB                            EXPIRED </span><span class="pun">&amp;</span><span class="pln"> LOCKED
CTXSYS                         EXPIRED </span><span class="pun">&amp;</span><span class="pln"> LOCKED
MDSYS                          EXPIRED </span><span class="pun">&amp;</span><span class="pln"> LOCKED</span></code></pre>
<p>Now you can use Pedro Carriço answer <a href="http://stackoverflow.com/a/6777079/2432468">http://stackoverflow.com/a/6777079/2432468</a> </p>
</div></text><author><a href="/users/2432468/pawan-kumar">Pawan Kumar</a></author><comments/></answer></answers></post>