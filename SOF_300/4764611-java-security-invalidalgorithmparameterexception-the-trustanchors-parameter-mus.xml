<?xml version="1.0" encoding="utf-8"?>
<post><title>java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty on Linux, or why is the default truststore empty - Stack Overflow</title><question><text><div class="post-text" itemprop="text">
<div class="question-status question-originals-of-duplicate">
<p>This question already has an answer here:</p>
<ul>
<li>
<a dir="ltr" href="/questions/6784463/error-trustanchors-parameter-must-be-non-empty">Error - trustAnchors parameter must be non-empty</a>
<span class="question-originals-answer-count">
                    22 answers
                </span>
</li>
</ul>
</div>
<p>When you google for this exception: <code>java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty</code>, multiple results appear. However there is no definitive solution, only guesses.</p>
<p>The problem arises (in my case at least) when I try to use open a connection over SSL. It works fine on my windows machine, but when I deploy it to the linux machine (with sun's jre installed) it fails with the above exception.</p>
<p>The problem is that the default truststore of the JRE is empty for some reason (size of only 32 bytes, whereas it is 80kb on windows).</p>
<p>When I copied my <code>jre/lib/security/cacerts</code> file from windows to linux, it worked fine.</p>
<p>The question is - why is the linux jre having an empty trust store?</p>
<p>Note that this happens on an Amazon EC2 instance, with the AMI linux, so it might be due to some amazon policies (I think java was pre-installed, but I'm not sure)</p>
</div></text><author><a href="/users/203907/bozho">Bozho</a></author><comments/></question><answers><answer><text><div class="post-text" itemprop="text">
<p>The standard Sun JDK for linux has an absolutely ok cacerts and overall all files in the specified directory. The problem is the installation you use.</p>
</div></text><author><a href="/users/554431/bestsss">bestsss</a></author><comments><comment><text><span class="comment-copy">good to confirm. Perhaps it was the JRE bundled with the amazon instance</span></text><author><a class="comment-user owner" href="/users/203907/bozho" title="411,856 reputation">Bozho</a></author></comment><comment><text><span class="comment-copy">yeah, you have to ask the provider</span></text><author><a class="comment-user" href="/users/554431/bestsss" title="8,229 reputation">bestsss</a></author></comment><comment><text><span class="comment-copy">I am currently having the same problem here. I used openjdk 7, which by default creates a symlink to <code>/etc/ssl/certs/java/cacerts</code>, which is empty on ubuntu AMIs on Amazon EC2. Currently trying with sun jdk.</span></text><author><a class="comment-user" href="/users/698504/cookie" title="4,888 reputation">Cookie</a></author></comment><comment><text><span class="comment-copy">Btw, I tried fixing above by copying my windows cacerts into said location, but that didn't help me.</span></text><author><a class="comment-user" href="/users/698504/cookie" title="4,888 reputation">Cookie</a></author></comment><comment><text><span class="comment-copy">And I confirm that it works with sun's jdk. On Ubuntu, use <code>sudo update-alternatives --config java</code> to switch after installing sun jdk.</span></text><author><a class="comment-user" href="/users/698504/cookie" title="4,888 reputation">Cookie</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>I got this error in Ubuntu. I saw that
/usr/lib/jvm/java-8-openjdk-amd64/jre/lib/security/cacerts
was a broken link to /etc/ssl/certs/java/cacerts. That lead me to this bug: 
<a href="https://bugs.launchpad.net/ubuntu/+source/ca-certificates-java/+bug/983302">https://bugs.launchpad.net/ubuntu/+source/ca-certificates-java/+bug/983302</a>
The README for ca-certificates-java eventually showed the actual fix:</p>
<p>run</p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pln">update</span><span class="pun">-</span><span class="pln">ca</span><span class="pun">-</span><span class="pln">certificates </span><span class="pun">-</span><span class="pln">f</span></code></pre>
<p>apt-get install ca-certificates-java didn't work for me. It just marked it as manually installed.</p>
</div></text><author><a href="/users/988346/user988346">user988346</a></author><comments><comment><text><span class="comment-copy">Nice! Read a lot of discussions on this and this command fixed it for me.</span></text><author><a class="comment-user" href="/users/351688/guus" title="1,467 reputation">Guus</a></author></comment><comment><text><span class="comment-copy">I had that issue with the Scaleway Debian jessie distribution. THIS answer actually solves the issue. However, the <code>-f</code> may remove any manually added certificates <code>-f, --fresh  Fresh updates. Remove symlinks in /etc/ssl/certs directory.</code></span></text><author><a class="comment-user" href="/users/1244588/dualed" title="6,116 reputation">dualed</a></author></comment><comment><text><span class="comment-copy">This should be the top accepted answer</span></text><author><a class="comment-user" href="/users/1289097/vanilla-face" title="332 reputation">Vanilla Face</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>I have avoided this error (Java 1.6.0 on OSX 10.5.8) by putting a dummy cert in the keystore, such as</p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pln">keytool </span><span class="pun">-</span><span class="pln">genkey </span><span class="pun">-</span><span class="pln">alias foo </span><span class="pun">-</span><span class="pln">keystore cacerts </span><span class="pun">-</span><span class="pln">dname cn</span><span class="pun">=</span><span class="pln">test </span><span class="pun">-</span><span class="pln">storepass changeit </span><span class="pun">-</span><span class="pln">keypass changeit</span></code></pre>
<p>Surely the question should be "Why can't java handle an empty trustStore?"</p>
</div></text><author><a href="/users/1551506/andrew">Andrew</a></author><comments><comment><text><span class="comment-copy">I fully agree on your last statement. Especially since Java 6 reports "java.lang.RuntimeException: Unexpected error: [..] the trustAnchors parameter must be non-empty". An empty truststore should not be something that one might expect, i.e. trust no one.</span></text><author><a class="comment-user" href="/users/667073/whaefelinger" title="494 reputation">whaefelinger</a></author></comment><comment><text><span class="comment-copy">Thanks - this also happened when I cleared the keystore for internal testing and started getting this error. The resolution was indeed to add a dummy key.</span></text><author><a class="comment-user" href="/users/1669011/tor" title="315 reputation">Tor</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>Not the answer to the original question but when trying to resolve a similar issue, I found that the Mac OS X update to Maverics screwed up the java install (the cacert actually). Remove <code>sudo rm -rf /Library/Java/JavaVirtualMachines/*.jdk</code> and reinstall from <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a></p>
</div></text><author><a href="/users/291108/manuel-darveau">Manuel Darveau</a></author><comments><comment><text><span class="comment-copy">yes, same here. I think that was because of the upgrade</span></text><author><a class="comment-user" href="/users/334813/ambodi" title="2,857 reputation">ambodi</a></author></comment><comment><text><span class="comment-copy">After the Mavericks upgrade I got "java.security.InvalidAlgorithmParameterException: the trustAnchors parameter must be non-empty" when Java code attempted to make an SSL connection. Reinstalling Java 6 fixed it for me.</span></text><author><a class="comment-user" href="/users/1374999/jake-collins" title="95 reputation">Jake Collins</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>My solution on Windows was to either run console window as Administrator or change the environment variable MAVEN_OPTS to use a hardcoded path to trust.jks (e.g. 'C:\Users\oddros') instead of '%USERPROFILE%'. My MAVEN_OPTS now looks like this:</p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pun">-</span><span class="typ">Djavax</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="pln">ssl</span><span class="pun">.</span><span class="pln">trustStore</span><span class="pun">=</span><span class="pln">C</span><span class="pun">:</span><span class="pln">\Users\oddros\trust</span><span class="pun">.</span><span class="pln">jks </span><span class="pun">-</span><span class="typ">Djavax</span><span class="pun">.</span><span class="pln">net</span><span class="pun">.</span><span class="pln">ssl</span><span class="pun">.</span><span class="pln">trustStorePassword</span><span class="pun">=</span><span class="pln">changeit</span></code></pre>
</div></text><author><a href="/users/2571875/superodde">superodde</a></author><comments><comment><text><span class="comment-copy">this was an invaluable hint. This worked for me, as well. However, it is fairly odd that the file works with absolute reference and not with relative reference, even though it was abviously found with a relative reference. I even doubled-checked the relative path was valid by renaming the file an error would occure saying the file could not be found.</span></text><author><a class="comment-user" href="/users/2108919/omilke" title="570 reputation">omilke</a></author></comment><comment><text><span class="comment-copy">This worked for me as well. I was modifying the run configurations in IntelliJ Idea. Thanks.</span></text><author><a class="comment-user" href="/users/1403246/maheeka" title="1,205 reputation">maheeka</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>Had the same issue on Ubuntu 14.10 with java-8-oracle installed.</p>
<p>Solved installing ca-certificates-java package: </p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pln">sudo apt</span><span class="pun">-</span><span class="pln">get install ca</span><span class="pun">-</span><span class="pln">certificates</span><span class="pun">-</span><span class="pln">java</span></code></pre>
</div></text><author><a href="/users/510671/daniele-dellafiore">Daniele Dellafiore</a></author><comments><comment><text><span class="comment-copy">Thanks, this worked for me.</span></text><author><a class="comment-user" href="/users/265119/magick" title="389 reputation">Magick</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>If this happens to you with an OpenJDK install on Mac OS X (as opposed to Linux), and you do have the official Mac OS X Java (i.e. latest Java 6) installed through Software Update, you can just do this:</p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pln">cd $OPENJDK_HOME</span><span class="pun">/</span><span class="typ">Contents</span><span class="pun">/</span><span class="typ">Home</span><span class="pun">/</span><span class="pln">jre</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">/</span><span class="pln">security
ln </span><span class="pun">-</span><span class="pln">s </span><span class="pun">/</span><span class="typ">System</span><span class="pun">/</span><span class="typ">Library</span><span class="pun">/</span><span class="typ">Java</span><span class="pun">/</span><span class="typ">Support</span><span class="pun">/</span><span class="typ">CoreDeploy</span><span class="pun">.</span><span class="pln">bundle</span><span class="pun">/</span><span class="typ">Contents</span><span class="pun">/</span><span class="typ">Home</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">/</span><span class="pln">security</span><span class="pun">/</span><span class="pln">cacerts
ln </span><span class="pun">-</span><span class="pln">s </span><span class="pun">/</span><span class="typ">System</span><span class="pun">/</span><span class="typ">Library</span><span class="pun">/</span><span class="typ">Java</span><span class="pun">/</span><span class="typ">Support</span><span class="pun">/</span><span class="typ">Deploy</span><span class="pun">.</span><span class="pln">bundle</span><span class="pun">/</span><span class="typ">Contents</span><span class="pun">/</span><span class="typ">Home</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">/</span><span class="pln">security</span><span class="pun">/</span><span class="pln">blacklist 
ln </span><span class="pun">-</span><span class="pln">s </span><span class="pun">/</span><span class="typ">System</span><span class="pun">/</span><span class="typ">Library</span><span class="pun">/</span><span class="typ">Java</span><span class="pun">/</span><span class="typ">Support</span><span class="pun">/</span><span class="typ">Deploy</span><span class="pun">.</span><span class="pln">bundle</span><span class="pun">/</span><span class="typ">Contents</span><span class="pun">/</span><span class="typ">Home</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">/</span><span class="pln">security</span><span class="pun">/</span><span class="pln">trusted</span><span class="pun">.</span><span class="pln">libraries </span></code></pre>
<p>where <code>$OPENJDK_HOME</code> is the root directory of your OpenJDK install, typically <code>OPENJDK_HOME=/Library/Java/JavaVirtualMachines/1.7.0u.jdk</code>. This is identical to how official Java installs on Mac OS X acquire these files - they also just symlink them from those system bundles. Works for Lion, not sure for earlier versions of the OS.</p>
</div></text><author><a href="/users/131552/attila-szegedi">Attila Szegedi</a></author><comments><comment><text><span class="comment-copy">On my Mac OS X Maverics, /System/Library/Java/Support/CoreDeploy.bundle/Contents/Home‌​/lib/security/cacert‌​s does not exist. :-(</span></text><author><a class="comment-user" href="/users/573149/andrew-mackenzie" title="2,733 reputation">Andrew Mackenzie</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>My cacerts file was totally empty.  I solved this by copying the cacerts file off my windows machine (that's using Oracle Java 7) and scp'd it to my Linux box (OpenJDK).  </p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pln">cd </span><span class="pun">%</span><span class="pln">JAVA_HOME</span><span class="pun">%/</span><span class="pln">jre</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">/</span><span class="pln">security</span><span class="pun">/</span><span class="pln">
scp cacerts mylinuxmachin</span><span class="pun">:/</span><span class="pln">tmp</span></code></pre>
<p>and then on the linux machine</p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pln">cp </span><span class="pun">/</span><span class="pln">tmp</span><span class="pun">/</span><span class="pln">cacerts </span><span class="pun">/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">ssl</span><span class="pun">/</span><span class="pln">certs</span><span class="pun">/</span><span class="pln">java</span><span class="pun">/</span><span class="pln">cacerts</span></code></pre>
<p>It's worked great so far.</p>
</div></text><author><a href="/users/491553/ryan-shillington">Ryan Shillington</a></author><comments><comment><text><span class="comment-copy">FWIW this worked for me for OpenJDK 8 on Ubuntu 15.04. I pulled the cacerts file from my Windows 7 laptop in path "C:\Program Files (x86)\Java\jre1.8.0_31\lib\security" as suggested.</span></text><author><a class="comment-user" href="/users/5553/john-t" title="415 reputation">John T</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>I can generate this error by setting system property trustStore to a missing jks file.  For example</p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pln">    </span><span class="typ">System</span><span class="pun">.</span><span class="pln">setProperty</span><span class="pun">(</span><span class="str">"javax.net.ssl.keyStore"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"C:/keystoreFile.jks"</span><span class="pun">);</span><span class="pln">
    </span><span class="typ">System</span><span class="pun">.</span><span class="pln">setProperty</span><span class="pun">(</span><span class="str">"javax.net.ssl.keyStorePassword"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"mypassword"</span><span class="pun">);</span><span class="pln">
    </span><span class="typ">System</span><span class="pun">.</span><span class="pln">setProperty</span><span class="pun">(</span><span class="str">"javax.net.ssl.trustStore"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"C:/missing-keystore.jks"</span><span class="pun">);</span><span class="pln">
    </span><span class="typ">System</span><span class="pun">.</span><span class="pln">setProperty</span><span class="pun">(</span><span class="str">"javax.net.ssl.trustStorePassword"</span><span class="pun">,</span><span class="pln"> </span><span class="str">"mypassword"</span><span class="pun">);</span></code></pre>
<p>This code does not generate a FileNotFound exception for some reason, but exactly the InvalidAlgorithmParameter exception listed above.</p>
<p>Kind of a dumb answer, but I can reproduce.</p>
</div></text><author><a href="/users/699325/the-camster">The Camster</a></author><comments/></answer><answer><text><div class="post-text" itemprop="text">
<p>Make sure that you have valid cacerts in the JRE/security, otherwise you will not bypass the invalid empty trustAnchors error.</p>
<p>In my Amazon EC2 Opensuse12 installation, the problem was that the file pointed by the cacerts in the JRE security directory was invalid:</p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pln">$ java </span><span class="pun">-</span><span class="pln">version
java version </span><span class="str">"1.7.0_09"</span><span class="pln">
</span><span class="typ">OpenJDK</span><span class="pln"> </span><span class="typ">Runtime</span><span class="pln"> </span><span class="typ">Environment</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IcedTea7</span><span class="pln"> </span><span class="lit">2.3</span><span class="pun">.</span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">suse</span><span class="pun">-</span><span class="lit">3.20</span><span class="pun">.</span><span class="lit">1</span><span class="pun">-</span><span class="pln">x86_64</span><span class="pun">)</span><span class="pln">
</span><span class="typ">OpenJDK</span><span class="pln"> </span><span class="lit">64</span><span class="pun">-</span><span class="typ">Bit</span><span class="pln"> </span><span class="typ">Server</span><span class="pln"> VM </span><span class="pun">(</span><span class="pln">build </span><span class="lit">23.2</span><span class="pun">-</span><span class="pln">b09</span><span class="pun">,</span><span class="pln"> mixed mode</span><span class="pun">)</span><span class="pln">

$ ls </span><span class="pun">-</span><span class="pln">l </span><span class="pun">/</span><span class="pln">var</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">/</span><span class="pln">ca</span><span class="pun">-</span><span class="pln">certificates</span><span class="pun">/</span><span class="pln">
</span><span class="pun">-</span><span class="pln">rw</span><span class="pun">-</span><span class="pln">r</span><span class="pun">--</span><span class="pln">r</span><span class="pun">--</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> root    </span><span class="lit">363</span><span class="pln"> </span><span class="typ">Feb</span><span class="pln"> </span><span class="lit">28</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">17</span><span class="pln"> ca</span><span class="pun">-</span><span class="pln">bundle</span><span class="pun">.</span><span class="pln">pem

$ ls </span><span class="pun">-</span><span class="pln">l </span><span class="pun">/</span><span class="pln">usr</span><span class="pun">/</span><span class="pln">lib64</span><span class="pun">/</span><span class="pln">jvm</span><span class="pun">/</span><span class="pln">jre</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">/</span><span class="pln">security</span><span class="pun">/</span><span class="pln">
lrwxrwxrwx </span><span class="lit">1</span><span class="pln"> root    </span><span class="lit">37</span><span class="pln"> </span><span class="typ">Mar</span><span class="pln"> </span><span class="lit">21</span><span class="pln"> </span><span class="lit">00</span><span class="pun">:</span><span class="lit">16</span><span class="pln"> cacerts </span><span class="pun">-&gt;</span><span class="pln"> </span><span class="pun">/</span><span class="pln">var</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">/</span><span class="pln">ca</span><span class="pun">-</span><span class="pln">certificates</span><span class="pun">/</span><span class="pln">java</span><span class="pun">-</span><span class="pln">cacerts
</span><span class="pun">-</span><span class="pln">rw</span><span class="pun">-</span><span class="pln">r</span><span class="pun">--</span><span class="pln">r</span><span class="pun">--</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> root  </span><span class="lit">2254</span><span class="pln"> </span><span class="typ">Jan</span><span class="pln"> </span><span class="lit">18</span><span class="pln"> </span><span class="lit">16</span><span class="pun">:</span><span class="lit">50</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">policy
</span><span class="pun">-</span><span class="pln">rw</span><span class="pun">-</span><span class="pln">r</span><span class="pun">--</span><span class="pln">r</span><span class="pun">--</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> root </span><span class="lit">15374</span><span class="pln"> </span><span class="typ">Jan</span><span class="pln"> </span><span class="lit">18</span><span class="pln"> </span><span class="lit">16</span><span class="pun">:</span><span class="lit">50</span><span class="pln"> java</span><span class="pun">.</span><span class="pln">security
</span><span class="pun">-</span><span class="pln">rw</span><span class="pun">-</span><span class="pln">r</span><span class="pun">--</span><span class="pln">r</span><span class="pun">--</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> root    </span><span class="lit">88</span><span class="pln"> </span><span class="typ">Jan</span><span class="pln"> </span><span class="lit">18</span><span class="pln"> </span><span class="lit">17</span><span class="pun">:</span><span class="lit">34</span><span class="pln"> nss</span><span class="pun">.</span><span class="pln">cfg</span></code></pre>
<p>So I solved installing an old Opensuse 11 valid certificates.  (sorry about that!!)</p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pln">$ ll
total </span><span class="lit">616</span><span class="pln">
</span><span class="pun">-</span><span class="pln">rw</span><span class="pun">-</span><span class="pln">r</span><span class="pun">--</span><span class="pln">r</span><span class="pun">--</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> root </span><span class="lit">220065</span><span class="pln"> </span><span class="typ">Jan</span><span class="pln"> </span><span class="lit">31</span><span class="pln"> </span><span class="lit">15</span><span class="pun">:</span><span class="lit">48</span><span class="pln"> ca</span><span class="pun">-</span><span class="pln">bundle</span><span class="pun">.</span><span class="pln">pem
</span><span class="pun">-</span><span class="pln">rw</span><span class="pun">-</span><span class="pln">r</span><span class="pun">--</span><span class="pln">r</span><span class="pun">--</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> root    </span><span class="lit">363</span><span class="pln"> </span><span class="typ">Feb</span><span class="pln"> </span><span class="lit">28</span><span class="pln"> </span><span class="lit">14</span><span class="pun">:</span><span class="lit">17</span><span class="pln"> ca</span><span class="pun">-</span><span class="pln">bundle</span><span class="pun">.</span><span class="pln">pem</span><span class="pun">.</span><span class="pln">old
</span><span class="pun">-</span><span class="pln">rw</span><span class="pun">-</span><span class="pln">r</span><span class="pun">--</span><span class="pln">r</span><span class="pun">--</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> root </span><span class="lit">161555</span><span class="pln"> </span><span class="typ">Jan</span><span class="pln"> </span><span class="lit">31</span><span class="pln"> </span><span class="lit">15</span><span class="pun">:</span><span class="lit">48</span><span class="pln"> java</span><span class="pun">-</span><span class="pln">cacerts</span></code></pre>
<p>I understood that you could use the keytool to generate a new one (<a href="http://mail.openjdk.java.net/pipermail/distro-pkg-dev/2010-April/008961.html" rel="nofollow">http://mail.openjdk.java.net/pipermail/distro-pkg-dev/2010-April/008961.html</a>). I'll probably have to that soon.</p>
<p>regards
  lellis</p>
</div></text><author><a href="/users/1631927/paulo-henrique-lellis-gonalves">Paulo Henrique Lellis Gonalves</a></author><comments/></answer><answer><text><div class="post-text" itemprop="text">
<p>Have the same issue. Resolved it by installing ca-certificate bundle from Mozilla:</p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pln">$ zypper in ca</span><span class="pun">-</span><span class="pln">certificates</span><span class="pun">-</span><span class="pln">mozilla
</span><span class="typ">The</span><span class="pln"> following NEW </span><span class="kwd">package</span><span class="pln"> is going to be installed</span><span class="pun">:</span><span class="pln">
ca</span><span class="pun">-</span><span class="pln">certificates</span><span class="pun">-</span><span class="pln">mozilla 

</span><span class="lit">1</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="kwd">package</span><span class="pln"> to install</span><span class="pun">.</span><span class="pln">
</span><span class="typ">Retrieving</span><span class="pln"> </span><span class="kwd">package</span><span class="pln"> ca</span><span class="pun">-</span><span class="pln">certificates</span><span class="pun">-</span><span class="pln">mozilla</span><span class="pun">-</span><span class="lit">1.85</span><span class="pun">-</span><span class="lit">8.8</span><span class="pun">.</span><span class="lit">1.noarch</span><span class="pln">
</span><span class="pun">(</span><span class="lit">1</span><span class="pun">/</span><span class="lit">1</span><span class="pun">),</span><span class="pln"> </span><span class="lit">143.7</span><span class="pln"> </span><span class="typ">KiB</span><span class="pln"> </span><span class="pun">(</span><span class="lit">239.1</span><span class="pln"> </span><span class="typ">KiB</span><span class="pln"> unpacked</span><span class="pun">)</span><span class="pln">
</span><span class="typ">Retrieving</span><span class="pun">:</span><span class="pln"> ca</span><span class="pun">-</span><span class="pln">certificates</span><span class="pun">-</span><span class="pln">mozilla</span><span class="pun">-</span><span class="lit">1.85</span><span class="pun">-</span><span class="lit">8.8</span><span class="pun">.</span><span class="lit">1.noarch</span><span class="pun">.</span><span class="pln">rpm</span><span class="pun">.....................[</span><span class="pln">done</span><span class="pun">]</span><span class="pln">
</span><span class="typ">Installing</span><span class="pun">:</span><span class="pln"> ca</span><span class="pun">-</span><span class="pln">certificates</span><span class="pun">-</span><span class="pln">mozilla</span><span class="pun">-</span><span class="lit">1.85</span><span class="pun">-</span><span class="lit">8.8</span><span class="pun">.</span><span class="lit">1</span><span class="pln"> </span><span class="pun">...............................[</span><span class="pln">done</span><span class="pun">]</span><span class="pln">
</span><span class="typ">Additional</span><span class="pln"> rpm output</span><span class="pun">:</span><span class="pln">
</span><span class="typ">Updating</span><span class="pln"> certificates in </span><span class="pun">/</span><span class="pln">etc</span><span class="pun">/</span><span class="pln">ssl</span><span class="pun">/</span><span class="pln">certs</span><span class="pun">...</span><span class="pln">
</span><span class="lit">144</span><span class="pln"> added</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> removed</span><span class="pun">.</span><span class="pln">
creating </span><span class="pun">/</span><span class="pln">var</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">/</span><span class="pln">ca</span><span class="pun">-</span><span class="pln">certificates</span><span class="pun">/</span><span class="pln">ca</span><span class="pun">-</span><span class="pln">bundle</span><span class="pun">.</span><span class="pln">pem </span><span class="pun">...</span><span class="pln">
creating </span><span class="pun">/</span><span class="pln">var</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">/</span><span class="pln">ca</span><span class="pun">-</span><span class="pln">certificates</span><span class="pun">/</span><span class="pln">java</span><span class="pun">-</span><span class="pln">cacerts </span><span class="pun">...</span><span class="pln">
</span><span class="lit">144</span><span class="pln"> added</span><span class="pun">,</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> removed</span><span class="pun">.</span><span class="pln">

$ ll </span><span class="pun">/</span><span class="pln">var</span><span class="pun">/</span><span class="pln">lib</span><span class="pun">/</span><span class="pln">ca</span><span class="pun">-</span><span class="pln">certificates</span><span class="pun">/</span><span class="pln">
total </span><span class="lit">392</span><span class="pln">
drwxr</span><span class="pun">-</span><span class="pln">xr</span><span class="pun">-</span><span class="pln">x  </span><span class="lit">2</span><span class="pln"> root root   </span><span class="lit">4096</span><span class="pln"> </span><span class="typ">Apr</span><span class="pln"> </span><span class="lit">26</span><span class="pln"> </span><span class="lit">07</span><span class="pun">:</span><span class="lit">25</span><span class="pln"> </span><span class="pun">./</span><span class="pln">
drwxr</span><span class="pun">-</span><span class="pln">xr</span><span class="pun">-</span><span class="pln">x </span><span class="lit">30</span><span class="pln"> root root   </span><span class="lit">4096</span><span class="pln"> </span><span class="typ">Apr</span><span class="pln"> </span><span class="lit">25</span><span class="pln"> </span><span class="lit">15</span><span class="pun">:</span><span class="lit">00</span><span class="pln"> </span><span class="pun">../</span><span class="pln">
</span><span class="pun">-</span><span class="pln">rw</span><span class="pun">-</span><span class="pln">r</span><span class="pun">--</span><span class="pln">r</span><span class="pun">--</span><span class="pln">  </span><span class="lit">1</span><span class="pln"> root root </span><span class="lit">220196</span><span class="pln"> </span><span class="typ">Apr</span><span class="pln"> </span><span class="lit">26</span><span class="pln"> </span><span class="lit">07</span><span class="pun">:</span><span class="lit">25</span><span class="pln"> ca</span><span class="pun">-</span><span class="pln">bundle</span><span class="pun">.</span><span class="pln">pem
</span><span class="pun">-</span><span class="pln">rw</span><span class="pun">-</span><span class="pln">r</span><span class="pun">--</span><span class="pln">r</span><span class="pun">--</span><span class="pln">  </span><span class="lit">1</span><span class="pln"> root root </span><span class="lit">161555</span><span class="pln"> </span><span class="typ">Apr</span><span class="pln"> </span><span class="lit">26</span><span class="pln"> </span><span class="lit">07</span><span class="pun">:</span><span class="lit">25</span><span class="pln"> java</span><span class="pun">-</span><span class="pln">cacerts</span></code></pre>
<p>P.S.</p>
<pre class="lang-java prettyprint prettyprinted" style=""><code><span class="pln">$ cat </span><span class="pun">/</span><span class="pln">etc</span><span class="pun">/</span><span class="typ">SuSE</span><span class="pun">-</span><span class="pln">release
openSUSE </span><span class="lit">12.2</span><span class="pln"> </span><span class="pun">(</span><span class="pln">x86_64</span><span class="pun">)</span><span class="pln">
VERSION </span><span class="pun">=</span><span class="pln"> </span><span class="lit">12.2</span><span class="pln">
CODENAME </span><span class="pun">=</span><span class="pln"> </span><span class="typ">Mantis</span><span class="pln">
$ java </span><span class="pun">-</span><span class="pln">version
java version </span><span class="str">"1.7.0_09"</span><span class="pln">
</span><span class="typ">OpenJDK</span><span class="pln"> </span><span class="typ">Runtime</span><span class="pln"> </span><span class="typ">Environment</span><span class="pln"> </span><span class="pun">(</span><span class="typ">IcedTea7</span><span class="pln"> </span><span class="lit">2.3</span><span class="pun">.</span><span class="lit">4</span><span class="pun">)</span><span class="pln"> </span><span class="pun">(</span><span class="pln">suse</span><span class="pun">-</span><span class="lit">3.20</span><span class="pun">.</span><span class="lit">1</span><span class="pun">-</span><span class="pln">x86_64</span><span class="pun">)</span><span class="pln">
</span><span class="typ">OpenJDK</span><span class="pln"> </span><span class="lit">64</span><span class="pun">-</span><span class="typ">Bit</span><span class="pln"> </span><span class="typ">Server</span><span class="pln"> VM </span><span class="pun">(</span><span class="pln">build </span><span class="lit">23.2</span><span class="pun">-</span><span class="pln">b09</span><span class="pun">,</span><span class="pln"> mixed mode</span><span class="pun">)</span></code></pre>
</div></text><author><a href="/users/2322889/user2322889">user2322889</a></author><comments><comment><text><span class="comment-copy">Guessing the certificate chain was broken? May be the case for Bozho also.</span></text><author><a class="comment-user" href="/users/1458679/ren" title="1,047 reputation">Ren</a></author></comment></comments></answer><answer><text><div class="post-text" itemprop="text">
<p>This happens because Access Privilege varies from OS to OS. Windows access hierarchy is different from Unix. However, this could be overcome by following these simple steps:</p>
<ol>
<li>Increase accessibility with <code>AccessController.doPrivileged(java.security.PrivilegedAction subclass)</code></li>
<li>Set your own <code>java.security.Provider</code> subclass as security property.
a.  Security.insertProviderAt(new , 2);</li>
<li>Set your Algorythm with <code>Security.setProperty("ssl.TrustManagerFactory.algorithm" ,  “XTrust509”);</code></li>
</ol>
</div></text><author><a href="/users/3256826/pijush">Pijush</a></author><comments/></answer><answer><text><div class="post-text" itemprop="text">
<p>I get this same error on my Windows 7 machine when the permissions on my cacerts file in my C:\Program Files\Java\jdk1.7.0_51\jre\lib\security folder are not set correctly.</p>
<p>To resolve the issue, I allow the SERVICE and INTERACTIVE users to have all modify permissions on cacerts <em>except</em> "change permissions" and "take ownership" (from Advanced Settings, in the Security properties).  I assume that allowing these services to both read and write extended attributes may have something to do with the error going away.</p>
</div></text><author><a href="/users/546801/fuzzyanalysis">fuzzyanalysis</a></author><comments/></answer></answers></post>